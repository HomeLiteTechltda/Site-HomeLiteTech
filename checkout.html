<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout - Editor Online</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: Arial, sans-serif;
            background-color: #222;
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }
        .checkout-container {
            background-color: #333;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.3);
            width: 400px;
            text-align: center;
        }
        h1 {
            margin-bottom: 20px;
        }
        .product-info, .payment-info {
            margin-bottom: 20px;
        }
        input {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            border: none;
        }
        .total {
            margin: 15px 0;
            font-size: 1.5em;
        }
        .purchase-btn {
            padding: 10px 20px;
            background-color: #007bff;
            color: white;
            border: none;
            cursor: pointer;
            border-radius: 5px;
        }
        .purchase-btn:hover {
            background-color: #0056b3;
        }
        .invoice, .success-animation {
            display: none;
            margin-top: 20px;
            text-align: left;
        }
        .success-animation {
            font-size: 1.2em;
            animation: fadeInOut 4s ease-in-out forwards;
        }
        @keyframes fadeInOut {
            0% { opacity: 0; }
            20% { opacity: 1; }
            80% { opacity: 1; }
            100% { opacity: 0; }
        }
    </style>
</head>
<body>
    <div class="checkout-container">
        <h1>Checkout</h1>
        <div class="product-info">
            <p><strong>Produto:</strong> Download do cÃ³digo gerado</p>
            <p><strong>Quantidade:</strong> 1</p>
            <p class="total"><strong>Total:</strong> R$300,00</p>
        </div>

        <div class="payment-info">
            <h3>Dados de Pagamento</h3>
            <input type="text" id="card-name" placeholder="Nome no CartÃ£o">
            <input type="text" id="card-number" placeholder="NÃºmero do CartÃ£o">
            <p id="card-brand" style="font-weight: bold; margin-top: 10px;"></p>
            <input type="text" id="expiry-date" placeholder="Data de ExpiraÃ§Ã£o (MM/AA)">
            <input type="text" id="cvv" placeholder="CVV">
        </div>

        <button class="purchase-btn" onclick="completePurchase()">Comprar</button>

        <div class="invoice">
            <h2>Nota Fiscal</h2>
            <p><strong>Produto:</strong> Download do cÃ³digo gerado</p>
            <p><strong>PreÃ§o:</strong> R$300,00</p>
            <p><strong>Data:</strong> <span id="date"></span></p>
            <p><strong>NÃºmero do Pedido:</strong> <span id="order-number"></span></p>
        </div>

        <div class="success-animation">
            ðŸŽ‰ Compra realizada com sucesso! ðŸŽ‰
        </div>
    </div>

    <script>
        const { jsPDF } = window.jspdf;

        function completePurchase() {
            // Simular a geraÃ§Ã£o da nota fiscal
            const invoice = document.querySelector('.invoice');
            const orderNumber = Math.floor(Math.random() * 1000000); // Gera nÃºmero aleatÃ³rio para a nota
            const date = new Date().toLocaleDateString();

            document.getElementById('order-number').textContent = orderNumber;
            document.getElementById('date').textContent = date;

            // Gerar a nota fiscal em PDF
            const pdf = new jsPDF();
            pdf.text('Nota Fiscal', 20, 10);
            pdf.text(`Produto: Download do cÃ³digo gerado`, 20, 20);
            pdf.text(`PreÃ§o: R$300,00`, 20, 30);
            pdf.text(`Data: ${date}`, 20, 40);
            pdf.text(`NÃºmero do Pedido: ${orderNumber}`, 20, 50);
            pdf.save('nota_fiscal.pdf');

            // Exibir a animaÃ§Ã£o de sucesso
            document.querySelector('.success-animation').style.display = 'block';
            setTimeout(() => {
                document.querySelector('.success-animation').style.display = 'none';
            }, 4000);

            // Exibir a nota fiscal
            invoice.style.display = 'block';
        }

        function getCardBrand(cardNumber) {
            const cardBrands = {
                visa: /^4[0-9]{0,}/,
                mastercard: /^(5[1-5][0-9]{0,}|2[2-7][0-9]{0,})/,
                americanExpress: /^3[47][0-9]{0,}/,
                discover: /^6(?:011|5[0-9]{2})/,
                elo: /^(4011|4312|4389|4576|5041|5067|5210|5916|6362|6363|6364|6365|6366|6367|6368|6369|6504|6505|6506|6507|6508|6509|6510|6511|6512|6513|6514|6515|6516|6517|6518|6519|6520|6521|6522|6523|6524|6525|6526|6527|6528|6529|6530|6531|6532|6533|6534|6535|6536|6537|6538|6539|6540|6541|6542|6543|6544|6545|6546|6547|6548|6549|6550|6551|6552|6553|6554|6555|6556|6557|6558|6559|6560|6561|6562|6563|6564|6565|6566|6567|6568|6569|6570|6571|6572|6573|6574|6575|6576|6577|6578|6579|6580|6581|6582|6583|6584|6585|6586|6587|6588|6589|6590|6591|6592|6593|6594|6595|6596|6597|6598|6599|6700|6701|6702|6703|6704|6705|6706|6707|6708|6709|6710|6711|6712|6713|6714|6715|6716|6717|6718|6719|6720|6721|6722|6723|6724|6725|6726|6727|6728|6729|6730|6731|6732|6733|6734|6735|6736|6737|6738|6739|6740|6741|6742|6743|6744|6745|6746|6747|6748|6749|6750|6751|6752|6753|6754|6755|6756|6757|6758|6759|6760|6761|6762|6763|6764|6765|6766|6767|6768|6769|6770|6771|6772|6773|6774|6775|6776|6777|6778|6779|6780|6781|6782|6783|6784|6785|6786|6787|6788|6789|6790|6791|6792|6793|6794|6795|6796|6797|6798|6799)/
            };
            
            for (const brand in cardBrands) {
                if (cardBrands[brand].test(cardNumber)) {
                    return brand.charAt(0).toUpperCase() + brand.slice(1);
                }
            }
            return "Desconhecida";
        }

        document.getElementById('card-number').addEventListener('input', function() {
            const cardNumber = this.value.replace(/\s/g, ''); // Remove espaÃ§os
            const brand = getCardBrand(cardNumber);
            document.getElementById('card-brand').textContent = `Bandeira do CartÃ£o: ${brand}`;
        });
    </script>
</body>
</html>
